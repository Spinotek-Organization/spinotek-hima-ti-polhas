<!DOCTYPE html>
<html lang="id" class="bg-gray-50">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CashMate Dashboard</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#CCFF00',
                        secondary: '#1A1A1A',
                        accent: '#00FF94',
                        surface: '#F8F9FA',
                        glass: 'rgba(255, 255, 255, 0.7)',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Poppins', 'sans-serif'],
                    },
                    borderRadius: {
                        '2xl': '1.5rem',
                        '3xl': '2rem',
                    },
                    boxShadow: {
                        'glow': '0 0 20px rgba(204, 255, 0, 0.3)',
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.07)',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'float-delayed': 'float 6s ease-in-out 3s infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="antialiased selection:bg-primary selection:text-secondary h-screen flex flex-col overflow-hidden">

    <!-- Guest Banner (Top Sticky) -->
    <div id="guest-banner"
        class="hidden z-50 bg-yellow-50 border-b border-yellow-200 px-6 py-2 text-center text-xs md:text-sm text-yellow-800 font-medium shrink-0">
        üëã <span class="font-bold">Mode Tamu</span> ‚Äî Data tidak disimpan permanen.
        <button onclick="showLoginModal()" class="underline ml-2 hover:text-yellow-900 font-bold">Login
            Sekarang</button>
    </div>

    <div class="flex flex-1 overflow-hidden relative">

        <!-- Mobile Sidebar Overlay -->
        <div id="sidebar-overlay" onclick="toggleSidebar()"
            class="fixed inset-0 bg-black/50 z-20 hidden md:hidden glass-panel"></div>

        <!-- Sidebar -->
        <aside id="sidebar"
            class="absolute md:relative w-64 bg-white border-r border-gray-200 h-full flex flex-col transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-30">
            <!-- Logo -->
            <div class="h-20 flex items-center px-8 border-b border-gray-100">
                <a href="index.html" class="font-heading font-bold text-xl tracking-tight flex items-center gap-2">
                    <svg class="w-10 h-10 drop-shadow-md hover:scale-110 transition-transform duration-300"
                        viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <!-- Wallet Body -->
                        <rect x="15" y="30" width="70" height="50" rx="12" fill="#84CC16" stroke="#1A2E05"
                            stroke-width="4" />
                        <!-- Flap -->
                        <path d="M15 42C15 35.3726 20.3726 30 27 30H73C79.6274 30 85 35.3726 85 42V45H15V42Z"
                            fill="#65A30D" stroke="#1A2E05" stroke-width="4" />
                        <!-- Face -->
                        <circle cx="40" cy="55" r="4" fill="#1A2E05" />
                        <circle cx="60" cy="55" r="4" fill="#1A2E05" />
                        <path d="M42 65C42 65 46 70 50 70C54 70 58 65 58 65" stroke="#1A2E05" stroke-width="3"
                            stroke-linecap="round" />
                        <!-- Cheeks -->
                        <circle cx="35" cy="60" r="3" fill="#FCA5A5" opacity="0.6" />
                        <circle cx="65" cy="60" r="3" fill="#FCA5A5" opacity="0.6" />
                        <!-- Coin -->
                        <circle cx="50" cy="25" r="12" fill="#FACC15" stroke="#1A2E05" stroke-width="3" />
                        <path d="M50 18V32M43 25H57" stroke="#FEF08A" stroke-width="3" stroke-linecap="round" />
                        <!-- Sparkle -->
                        <path d="M75 15L77 18L80 18L77 21L78 24L75 22L72 24L73 21L70 18L73 18L75 15Z" fill="#FACC15" />
                    </svg>
                    CashMate
                </a>
            </div>

            <!-- Nav Links -->
            <nav class="flex-1 px-4 py-6 space-y-2 overflow-y-auto">
                <button onclick="switchPage('overview')" id="nav-overview"
                    class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold text-gray-600 hover:bg-gray-50 transition-all active">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                    </svg>
                    Overview
                </button>
                <button onclick="switchPage('transactions')" id="nav-transactions"
                    class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold text-gray-600 hover:bg-gray-50 transition-all">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                    </svg>
                    Transactions
                </button>
                <button onclick="switchPage('ai-advisor')" id="nav-ai-advisor"
                    class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold text-gray-600 hover:bg-gray-50 transition-all">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                    </svg>
                    AI Advisor
                </button>
                <button onclick="switchPage('subscriptions')" id="nav-subscriptions"
                    class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold text-gray-600 hover:bg-gray-50 transition-all">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                    </svg>
                    Subscriptions
                </button>
                <button onclick="switchPage('settings')" id="nav-settings"
                    class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold text-gray-600 hover:bg-gray-50 transition-all">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    Settings
                </button>
            </nav>

            <!-- Bottom Actions -->
            <div class="p-4 border-t border-gray-100">
                <button onclick="logout()"
                    class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold text-red-500 hover:bg-red-50 transition-all">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 h-full overflow-y-auto bg-gray-50 p-6 md:p-8">
            <!-- Header -->
            <header class="flex justify-between items-center mb-8">
                <div>
                    <h1 class="font-heading text-2xl font-bold text-gray-800" id="page-title">Overview</h1>
                    <p class="text-xs text-gray-500 mt-1">Hari ini, <span id="current-date">...</span></p>
                </div>
                <div class="flex items-center gap-4">
                    <button onclick="showConnectWalletModal()"
                        class="hidden md:flex bg-secondary text-white px-4 py-2 rounded-lg text-sm font-bold shadow-lg hover:bg-black transition-all items-center gap-2">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                        Hubungkan Wallet
                    </button>
                    <button onclick="toggleSidebar()" class="md:hidden p-2 text-gray-600">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                    <div class="flex items-center gap-3 pl-4 border-l border-gray-200">
                        <div class="text-right hidden sm:block">
                            <div class="text-sm font-bold text-gray-800" id="user-name-display">Loading...</div>
                            <div class="text-xs text-gray-500">Free Plan</div>
                        </div>
                        <div onclick="switchPage('settings')"
                            class="w-10 h-10 bg-primary rounded-full flex items-center justify-center font-bold text-secondary text-sm user-avatar-display cursor-pointer hover:scale-110 transition-transform">
                            üëª</div>
                    </div>
                </div>
            </header>

            <!-- PAGES CONTENT -->

            <!-- 1. OVERVIEW PAGE -->
            <div id="page-overview" class="page-content space-y-6">
                <!-- Connect Wallet Banner (Mobile only or if empty) -->
                <div id="wallet-cta"
                    class="bg-gradient-to-r from-secondary to-gray-800 rounded-3xl p-8 text-white relative overflow-hidden shadow-xl hidden">
                    <div class="relative z-10 max-w-lg">
                        <h2 class="text-2xl font-bold mb-2">Dompet digital lo belum connect! üò±</h2>
                        <p class="text-white/80 mb-6">Connect sekarang biar AI bisa analisis pengeluaran lo secara
                            otomatis. Gak perlu catat manual lagi.</p>
                        <button onclick="showConnectWalletModal()"
                            class="bg-primary text-secondary px-6 py-3 rounded-xl font-bold hover:shadow-glow transition-all">Hubungkan
                            Sekarang</button>
                    </div>
                    <div
                        class="absolute right-0 top-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2">
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Main Balance -->
                    <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm">
                        <div class="flex items-center gap-2 text-sm text-gray-500 font-medium mb-1">
                            <span>Total Saldo</span>
                            <span
                                class="bg-green-100 text-green-700 px-2 py-0.5 rounded text-[10px] font-bold">+12%</span>
                        </div>
                        <div class="text-3xl font-heading font-extrabold text-gray-900" id="overview-balance">Rp 0</div>
                        <div class="mt-4 h-1 w-full bg-gray-100 rounded-full overflow-hidden">
                            <div class="h-full bg-primary w-2/3"></div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2" id="bokek-prediction">Prediksi bokek: -</p>
                    </div>

                    <!-- Expense This Week -->
                    <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm">
                        <div class="flex items-center gap-2 text-sm text-gray-500 font-medium mb-1">
                            <span>Pengeluaran Minggu Ini</span>
                        </div>
                        <div class="text-3xl font-heading font-extrabold text-red-500" id="overview-expense">Rp 0</div>
                        <p class="text-xs text-gray-400 mt-2">Boros di: <span class="font-bold text-gray-600"
                                id="top-category">-</span></p>
                    </div>

                    <!-- AI Monthly Insight -->
                    <div onclick="switchPage('ai-advisor')"
                        class="bg-gradient-to-br from-primary/10 to-white p-6 rounded-3xl border border-primary/20 shadow-sm relative cursor-pointer hover:shadow-md transition-all group">
                        <div class="absolute top-4 right-4 text-2xl group-hover:scale-110 transition-transform">ü§ñ</div>
                        <h3 class="font-bold text-gray-800 text-sm mb-2 group-hover:text-primary-dark">Kata AI Hari Ini
                        </h3>
                        <p class="text-sm text-gray-600 leading-relaxed italic" id="overview-ai-insight">"Belum ada data
                            nih. Coba jajan dulu atau connect wallet."</p>
                    </div>
                </div>

                <!-- Achievements Banner -->
                <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-gray-800">Badges & Achievements üèÜ</h3>
                        <span class="text-xs text-gray-400">Collect 'em all!</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="achievements-list">
                        <!-- Items injected via JS -->
                        <div class="text-center text-gray-400 text-xs py-4 col-span-3">Loading badges...</div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Chart Section -->
                    <div class="lg:col-span-2 bg-white p-6 rounded-3xl border border-gray-100 shadow-sm">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="font-bold text-gray-800">Trend Pengeluaran</h3>
                            <select class="text-xs border-gray-200 rounded-lg p-1 bg-gray-50">
                                <option>7 Hari Terakhir</option>
                                <option>30 Hari Terakhir</option>
                            </select>
                        </div>
                        <div class="h-64 w-full">
                            <canvas id="expenseChart"></canvas>
                        </div>
                    </div>

                    <!-- Recent Transactions (Mini) -->
                    <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm flex flex-col">
                        <h3 class="font-bold text-gray-800 mb-4">Transaksi Terakhir</h3>
                        <div class="flex-1 overflow-y-auto space-y-4" id="mini-transaction-list">
                            <!-- Items inserted via JS -->
                            <div class="text-center text-gray-400 text-sm py-8">Belum ada transaksi</div>
                        </div>
                        <button onclick="switchPage('transactions')"
                            class="mt-4 w-full py-2 text-sm text-secondary font-bold text-center border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors">Lihat
                            Semua</button>
                    </div>
                </div>
            </div>

            <!-- 2. TRANSACTIONS PAGE (Old Simulator) -->
            <div id="page-transactions" class="page-content hidden space-y-6">
                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- Form -->
                    <div class="bg-white p-8 rounded-[2rem] border border-gray-200 shadow-sm h-fit">
                        <h3 class="font-heading font-bold text-xl mb-4">Catat Manual</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Kategori</label>
                                <div class="grid grid-cols-3 gap-2">
                                    <button onclick="selectCategory('nongkrong')"
                                        class="cat-btn p-2 rounded-lg border border-gray-200 text-xs font-medium hover:bg-gray-50">üçª
                                        Nongki</button>
                                    <button onclick="selectCategory('makan')"
                                        class="cat-btn p-2 rounded-lg border border-gray-200 text-xs font-medium hover:bg-gray-50">üçî
                                        Makan</button>
                                    <button onclick="selectCategory('kopi')"
                                        class="cat-btn p-2 rounded-lg border border-gray-200 text-xs font-medium hover:bg-gray-50">‚òï
                                        Kopi</button>
                                    <button onclick="selectCategory('belanja')"
                                        class="cat-btn p-2 rounded-lg border border-gray-200 text-xs font-medium hover:bg-gray-50">üõçÔ∏è
                                        Belanja</button>
                                    <button onclick="selectCategory('transport')"
                                        class="cat-btn p-2 rounded-lg border border-gray-200 text-xs font-medium hover:bg-gray-50">üöó
                                        Ojol</button>
                                    <button onclick="selectCategory('lainnya')"
                                        class="cat-btn p-2 rounded-lg border border-gray-200 text-xs font-medium hover:bg-gray-50">üì¶
                                        Lainnya</button>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Nominal (Rp)</label>
                                <input type="number" id="sim-amount" placeholder="50000"
                                    class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary outline-none">
                            </div>
                            <button onclick="addTransaction()"
                                class="w-full bg-secondary text-white py-3 rounded-xl font-bold hover:shadow-lg transition-all">Simpan</button>
                        </div>
                    </div>

                    <!-- List -->
                    <div
                        class="lg:col-span-2 bg-white p-8 rounded-[2rem] border border-gray-200 shadow-sm min-h-[500px]">
                        <h3 class="font-heading font-bold text-xl mb-6">Riwayat Transaksi</h3>
                        <div class="space-y-4" id="full-transaction-list">
                            <div class="text-center text-gray-400 py-20">Belum ada data transaksi.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. AI ADVISOR PAGE (Old Chat) -->
            <div id="page-ai-advisor" class="page-content hidden h-[calc(100vh-140px)]">
                <div
                    class="h-full border border-gray-200 rounded-[2.5rem] bg-white relative flex flex-col overflow-hidden shadow-sm">
                    <!-- Chat Header -->
                    <div class="bg-white p-4 border-b border-gray-100 flex items-center gap-3 z-10">
                        <div
                            class="w-10 h-10 bg-primary rounded-full flex items-center justify-center font-bold text-secondary text-sm">
                            CM</div>
                        <div>
                            <div class="font-bold text-sm">CashMate AI</div>
                            <div class="text-xs text-green-500 flex items-center gap-1">Online</div>
                        </div>
                        <button onclick="clearChat()"
                            class="ml-auto text-xs text-gray-400 hover:text-red-500">Reset</button>
                    </div>

                    <!-- Chat Area -->
                    <div id="chat-box" class="flex-1 overflow-y-auto p-6 space-y-6 scroll-smooth pb-20 bg-gray-50/50">
                        <!-- Welcome Message -->
                        <div class="flex gap-3">
                            <div
                                class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-xs font-bold shrink-0">
                                CM</div>
                            <div
                                class="bg-white border border-gray-200 px-5 py-3 rounded-2xl rounded-tl-sm text-sm shadow-sm text-gray-700 max-w-[85%]">
                                Halo! Ada yang bisa dibantu soal keuangan hari ini?
                            </div>
                        </div>
                    </div>

                    <!-- Typing Indicator -->
                    <div id="typing-indicator"
                        class="hidden absolute bottom-20 left-6 bg-white border border-gray-100 px-4 py-3 rounded-2xl rounded-tl-sm text-sm z-10 shadow-sm">
                        <div class="flex gap-1">
                            <span class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></span>
                            <span class="w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100"></span>
                            <span class="w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200"></span>
                        </div>
                    </div>

                    <!-- Input -->
                    <div class="p-4 bg-white border-t border-gray-100 z-20">
                        <div class="relative flex items-center gap-2">
                            <input type="text" id="chat-input" placeholder="Tanya sesuatu..."
                                class="w-full pl-5 pr-12 py-3.5 rounded-full border border-gray-200 bg-gray-50 focus:bg-white focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all text-sm">
                            <button onclick="handleUserChat()"
                                class="absolute right-2 p-2 bg-secondary text-white rounded-full hover:bg-black transition-colors w-9 h-9 flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transform rotate-90" fill="none"
                                    viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 4. SUBSCRIPTIONS PAGE -->
            <div id="page-subscriptions" class="page-content hidden space-y-6">
                <div class="max-w-2xl mx-auto bg-white p-8 rounded-[2rem] border border-gray-200 shadow-sm">
                    <h3 class="font-heading font-bold text-xl mb-6">Subscription Detector</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-6">
                        <label
                            class="flex items-center gap-3 p-4 rounded-xl border border-gray-100 hover:bg-gray-50 cursor-pointer transition-all">
                            <input type="checkbox" value="186000"
                                class="sub-check w-5 h-5 text-primary rounded focus:ring-primary">
                            <span class="font-medium">Netflix (186k)</span>
                        </label>
                        <label
                            class="flex items-center gap-3 p-4 rounded-xl border border-gray-100 hover:bg-gray-50 cursor-pointer transition-all">
                            <input type="checkbox" value="55000"
                                class="sub-check w-5 h-5 text-primary rounded focus:ring-primary">
                            <span class="font-medium">Spotify (55k)</span>
                        </label>
                        <label
                            class="flex items-center gap-3 p-4 rounded-xl border border-gray-100 hover:bg-gray-50 cursor-pointer transition-all">
                            <input type="checkbox" value="149000"
                                class="sub-check w-5 h-5 text-primary rounded focus:ring-primary">
                            <span class="font-medium">Youtube (149k)</span>
                        </label>
                        <label
                            class="flex items-center gap-3 p-4 rounded-xl border border-gray-100 hover:bg-gray-50 cursor-pointer transition-all">
                            <input type="checkbox" value="450000"
                                class="sub-check w-5 h-5 text-primary rounded focus:ring-primary">
                            <span class="font-medium">Gym (450k)</span>
                        </label>
                    </div>
                    <button onclick="checkSubs()"
                        class="w-full bg-secondary text-white py-4 rounded-xl font-bold hover:shadow-lg transition-all">Analisis
                        Beban Bulanan</button>
                </div>
            </div>



        </main>
    </div>

    <!-- WALLET CONNECTION MODAL -->
    <div id="wallet-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity opacity-0" id="wallet-overlay">
        </div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white w-full max-w-lg rounded-3xl p-8 shadow-2xl transition-all scale-95 opacity-0"
            id="wallet-content">
            <h2 class="font-heading text-2xl font-bold text-center mb-2">Hubungkan Dompet</h2>
            <p class="text-gray-500 text-center text-sm mb-8">Pilih sumber dana untuk sinkronisasi otomatis.</p>

            <div class="grid grid-cols-2 gap-4">
                <button onclick="connectWalletProvider('Gopay')"
                    class="p-4 border border-gray-200 rounded-2xl hover:border-green-500 hover:bg-green-50 transition-all flex flex-col items-center gap-2 group">
                    <div
                        class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center text-2xl group-hover:scale-110 transition-transform">
                        üü¢</div>
                    <span class="font-bold text-gray-700">Gopay</span>
                </button>
                <button onclick="connectWalletProvider('OVO')"
                    class="p-4 border border-gray-200 rounded-2xl hover:border-purple-500 hover:bg-purple-50 transition-all flex flex-col items-center gap-2 group">
                    <div
                        class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl group-hover:scale-110 transition-transform">
                        üü£</div>
                    <span class="font-bold text-gray-700">OVO</span>
                </button>
                <button onclick="connectWalletProvider('Dana')"
                    class="p-4 border border-gray-200 rounded-2xl hover:border-blue-500 hover:bg-blue-50 transition-all flex flex-col items-center gap-2 group">
                    <div
                        class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-2xl group-hover:scale-110 transition-transform">
                        üîµ</div>
                    <span class="font-bold text-gray-700">Dana</span>
                </button>
                <button onclick="connectWalletProvider('BCA')"
                    class="p-4 border border-gray-200 rounded-2xl hover:border-blue-800 hover:bg-blue-50 transition-all flex flex-col items-center gap-2 group">
                    <div
                        class="w-12 h-12 bg-blue-800/10 rounded-full flex items-center justify-center text-2xl group-hover:scale-110 transition-transform">
                        üè¶</div>
                    <span class="font-bold text-gray-700">Bank BCA</span>
                </button>
            </div>

            <button onclick="hideConnectWalletModal()"
                class="mt-8 w-full py-3 text-gray-400 font-bold hover:text-gray-600">Batal</button>
        </div>
    </div>

    <!-- 5. SETTINGS PAGE -->
    <div id="page-settings" class="page-content hidden space-y-6">
        <!-- Profile Settings -->
        <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm">
            <h3 class="font-bold text-gray-800 mb-6">Profile Settings</h3>

            <div class="flex flex-col md:flex-row gap-8 items-start">
                <!-- Current Avatar -->
                <div class="flex flex-col items-center gap-4">
                    <div
                        class="w-32 h-32 bg-gray-100 rounded-full flex items-center justify-center text-6xl shadow-inner border-4 border-white user-avatar-display">
                        üëª
                    </div>
                    <p class="text-xs text-gray-400">Current Avatar</p>
                </div>

                <!-- Avatar Selection -->
                <div class="flex-1">
                    <label class="block text-sm font-bold text-gray-700 mb-3">Choose Avatar</label>
                    <div class="grid grid-cols-5 md:grid-cols-8 gap-3">
                        <button onclick="saveAvatar('üëª')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üëª</button>
                        <button onclick="saveAvatar('üê±')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üê±</button>
                        <button onclick="saveAvatar('üòé')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üòé</button>
                        <button onclick="saveAvatar('üê∏')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üê∏</button>
                        <button onclick="saveAvatar('ü§ñ')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">ü§ñ</button>
                        <button onclick="saveAvatar('üëΩ')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üëΩ</button>
                        <button onclick="saveAvatar('üíÄ')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üíÄ</button>
                        <button onclick="saveAvatar('ü§°')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">ü§°</button>
                        <button onclick="saveAvatar('ü¶Ñ')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">ü¶Ñ</button>
                        <button onclick="saveAvatar('üê≤')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üê≤</button>
                        <button onclick="saveAvatar('üí©')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üí©</button>
                        <button onclick="saveAvatar('üë∫')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üë∫</button>
                        <button onclick="saveAvatar('üëæ')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üëæ</button>
                        <button onclick="saveAvatar('ü§†')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">ü§†</button>
                        <button onclick="saveAvatar('üêº')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üêº</button>
                        <button onclick="saveAvatar('üêØ')"
                            class="w-12 h-12 rounded-xl bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-2xl transition-all hover:scale-110">üêØ</button>
                    </div>
                </div>
            </div>

            <div class="mt-8 border-t border-gray-100 pt-6">
                <label class="block text-sm font-bold text-gray-700 mb-2">Display Name</label>
                <div class="flex gap-4">
                    <input type="text" id="settings-username" placeholder="Your Name"
                        class="flex-1 px-4 py-3 rounded-xl border border-gray-200 focus:border-primary outline-none font-bold bg-gray-50">
                    <button onclick="saveProfile()"
                        class="bg-secondary text-white px-6 py-3 rounded-xl font-bold hover:bg-black transition-all">Save
                        Profile</button>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm opacity-50">
            <h3 class="font-bold text-gray-800 mb-4">App Settings (Coming Soon)</h3>
            <div class="space-y-4 pointer-events-none">
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Dark Mode</span>
                    <div class="w-12 h-6 bg-gray-200 rounded-full relative">
                        <div class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full"></div>
                    </div>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Notifications</span>
                    <div class="w-12 h-6 bg-primary rounded-full relative">
                        <div class="absolute right-1 top-1 w-4 h-4 bg-white rounded-full"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Subscription Analysis Modal -->
    <div id="sub-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity opacity-0" id="sub-overlay"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white w-full max-w-md rounded-3xl p-8 shadow-2xl transition-all scale-95 opacity-0"
            id="sub-content">
            <div class="text-center mb-6">
                <!-- Icon -->
                <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center text-3xl mx-auto mb-4">
                    üí∏</div>
                <h2 class="font-heading text-2xl font-bold text-gray-900">Subscription Check</h2>
                <p class="text-gray-500 text-sm mt-2">Nih hasil audit langganan lo.</p>
            </div>

            <div class="bg-gray-50 rounded-2xl p-5 mb-6 space-y-3 border border-gray-100">
                <div class="flex justify-between items-center">
                    <span class="text-gray-500 text-sm font-medium">Total Bulanan</span>
                    <span class="font-heading font-bold text-lg text-gray-900" id="sub-total-monthly">Rp 0</span>
                </div>
                <!-- Divider -->
                <div class="h-px bg-gray-200"></div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-500 text-sm font-medium">Beban Setahun</span>
                    <span class="font-heading font-bold text-lg text-red-500" id="sub-total-yearly">Rp 0</span>
                </div>
            </div>

            <!-- Active Subs List -->
            <div class="mb-6">
                <h3 class="text-xs font-bold text-gray-400 uppercase mb-3 tracking-wider">Layanan Aktif</h3>
                <div class="flex flex-wrap gap-2" id="sub-list">
                    <!-- Items injected via JS -->
                </div>
            </div>

            <!-- AI Insight Box -->
            <div class="bg-primary/10 border border-primary/20 p-4 rounded-2xl flex gap-3 items-start mb-8">
                <div class="text-2xl mt-0.5">ü§ñ</div>
                <div>
                    <div class="text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wider">CashMate AI
                        Insight</div>
                    <p class="text-sm text-gray-800 leading-relaxed italic" id="sub-insight">"..."</p>
                </div>
            </div>

            <button onclick="hideSubModal()"
                class="w-full bg-secondary text-white py-4 rounded-xl font-bold hover:bg-black hover:scale-[1.02] transition-all shadow-lg">
                Siap, Nanti Gw Pikirin üòÖ
            </button>
        </div>
    </div>

    <!-- Login/Register Modals (Copied from previous dashboard) -->
    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity opacity-0" id="login-overlay">
        </div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white w-full max-w-md rounded-3xl p-8 shadow-2xl transition-all scale-95 opacity-0"
            id="login-content">
            <button onclick="hideLoginModal()" class="absolute top-6 right-6 text-gray-400 hover:text-black">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <div class="text-center mb-8">
                <div class="flex items-center justify-center gap-3 mb-6">
                    <div class="w-12 h-12">
                        <svg class="w-full h-full drop-shadow-md hover:scale-110 transition-transform duration-300"
                            viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="15" y="30" width="70" height="50" rx="12" fill="#84CC16" stroke="#1A2E05"
                                stroke-width="4" />
                            <path d="M15 42C15 35.3726 20.3726 30 27 30H73C79.6274 30 85 35.3726 85 42V45H15V42Z"
                                fill="#65A30D" stroke="#1A2E05" stroke-width="4" />
                            <circle cx="40" cy="55" r="4" fill="#1A2E05" />
                            <circle cx="60" cy="55" r="4" fill="#1A2E05" />
                            <path d="M42 65C42 65 46 70 50 70C54 70 58 65 58 65" stroke="#1A2E05" stroke-width="3"
                                stroke-linecap="round" />
                            <circle cx="35" cy="60" r="3" fill="#FCA5A5" opacity="0.6" />
                            <circle cx="65" cy="60" r="3" fill="#FCA5A5" opacity="0.6" />
                            <circle cx="50" cy="25" r="12" fill="#FACC15" stroke="#1A2E05" stroke-width="3" />
                            <path d="M50 18V32M43 25H57" stroke="#FEF08A" stroke-width="3" stroke-linecap="round" />
                            <path d="M75 15L77 18L80 18L77 21L78 24L75 22L72 24L73 21L70 18L73 18L75 15Z"
                                fill="#FACC15" />
                        </svg>
                    </div>
                    <span class="font-heading font-bold text-3xl tracking-tight text-gray-900">CashMate</span>
                </div>
                <h2 class="font-heading text-2xl font-bold">Welcome Back! üëã</h2>
                <p class="text-gray-500 text-sm">Masuk buat lanjutin financial journey lo.</p>
            </div>
            <div class="space-y-4">
                <div><label class="block text-xs font-bold text-gray-500 uppercase mb-2">Username</label><input
                        type="text" id="login-username" placeholder="Username lo..."
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary outline-none font-bold">
                </div>
                <div><label class="block text-xs font-bold text-gray-500 uppercase mb-2">Password</label><input
                        type="password" id="login-password" placeholder="Rahasia..."
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary outline-none font-bold">
                </div>
                <button onclick="loginUser()"
                    class="w-full bg-secondary text-white py-4 rounded-xl font-bold hover:shadow-lg transition-all">Login</button>
            </div>
            <div class="mt-6 text-center text-sm text-gray-500">Belum punya akun? <button onclick="switchToRegister()"
                    class="font-bold text-secondary hover:underline">Daftar dulu gih</button></div>
            <div class="mt-6 pt-6 border-t border-gray-100"><button onclick="enableGuestMode()"
                    class="w-full py-3 rounded-xl border border-gray-200 text-gray-500 font-bold hover:bg-gray-50 hover:text-secondary transition-all text-sm flex items-center justify-center gap-2 group"><svg
                        xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 group-hover:scale-110 transition-transform"
                        fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>Masuk sebagai Tamu (Guest Mode)</button></div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="register-modal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity opacity-0" id="register-overlay">
        </div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white w-full max-w-md rounded-3xl p-8 shadow-2xl transition-all scale-95 opacity-0"
            id="register-content">
            <button onclick="hideRegisterModal()" class="absolute top-6 right-6 text-gray-400 hover:text-black">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <div class="text-center mb-8">
                <div class="mx-auto mb-4 w-16 h-16">
                    <svg class="w-full h-full drop-shadow-md" viewBox="0 0 100 100" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <rect x="15" y="30" width="70" height="50" rx="12" fill="#84CC16" stroke="#1A2E05"
                            stroke-width="4" />
                        <path d="M15 42C15 35.3726 20.3726 30 27 30H73C79.6274 30 85 35.3726 85 42V45H15V42Z"
                            fill="#65A30D" stroke="#1A2E05" stroke-width="4" />
                        <circle cx="40" cy="55" r="4" fill="#1A2E05" />
                        <circle cx="60" cy="55" r="4" fill="#1A2E05" />
                        <path d="M42 65C42 65 46 70 50 70C54 70 58 65 58 65" stroke="#1A2E05" stroke-width="3"
                            stroke-linecap="round" />
                        <circle cx="35" cy="60" r="3" fill="#FCA5A5" opacity="0.6" />
                        <circle cx="65" cy="60" r="3" fill="#FCA5A5" opacity="0.6" />
                        <circle cx="50" cy="25" r="12" fill="#FACC15" stroke="#1A2E05" stroke-width="3" />
                        <path d="M50 18V32M43 25H57" stroke="#FEF08A" stroke-width="3" stroke-linecap="round" />
                        <path d="M75 15L77 18L80 18L77 21L78 24L75 22L72 24L73 21L70 18L73 18L75 15Z" fill="#FACC15" />
                    </svg>
                </div>
                <h2 class="font-heading text-2xl font-bold">Join CashMate</h2>
                <p class="text-gray-500 text-sm">Mulai atur duit biar gak boncos.</p>
            </div>
            <div class="space-y-4">
                <div><label class="block text-xs font-bold text-gray-500 uppercase mb-2">Username</label><input
                        type="text" id="reg-username" placeholder="Panggilan keren lo..."
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary outline-none font-bold">
                </div>
                <div><label class="block text-xs font-bold text-gray-500 uppercase mb-2">Password</label><input
                        type="password" id="reg-password" placeholder="Susah ditebak..."
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary outline-none font-bold">
                </div>
                <div><label class="block text-xs font-bold text-gray-500 uppercase mb-2">Confirm Password</label><input
                        type="password" id="reg-password-confirm" placeholder="Ketik ulang..."
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-primary outline-none font-bold">
                </div>
                <button onclick="registerUser()"
                    class="w-full bg-primary text-secondary py-4 rounded-xl font-bold hover:shadow-lg transition-all">Gas
                    Daftar!</button>
            </div>
            <div class="mt-6 text-center text-sm text-gray-500">Udah punya akun? <button onclick="switchToLogin()"
                    class="font-bold text-secondary hover:underline">Login sini</button></div>
            <div class="mt-6 pt-6 border-t border-gray-100"><button onclick="enableGuestMode()"
                    class="w-full py-3 rounded-xl border border-gray-200 text-gray-500 font-bold hover:bg-gray-50 hover:text-secondary transition-all text-sm flex items-center justify-center gap-2 group"><svg
                        xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 group-hover:scale-110 transition-transform"
                        fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>Masuk sebagai Tamu (Guest Mode)</button></div>
        </div>
    </div>

    <!-- Custom JavaScript -->
    <script src="script.js"></script>
</body>

</html>